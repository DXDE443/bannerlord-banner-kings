using System.Collections.Generic;
using System.Xml;
using Bannerlord.UIExtenderEx.Attributes;
using Bannerlord.UIExtenderEx.Prefabs2;

namespace BannerKings.UI.Extensions
{
    [PrefabExtension("DiplomacyPanel", "descendant::Widget[1]/Children/ListPanel[1]/Children/Widget[1]/Children/ListPanel[1]/Children", "DiplomacyPanel")]
    internal class KingdomDiplomacyExtension : PrefabExtensionInsertPatch
    {
        private readonly List<XmlNode> nodes;

        public KingdomDiplomacyExtension()
        {
            var firstRow = new XmlDocument();
            var secondRow = new XmlDocument();
            //firstChild.LoadXml(
            //    \"<ListPanel IsVisible=\"@WarExists\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" MarginTop=\"20\" MarginBottom=\"20\" MarginRight=\"75\" MarginLeft=\"75\" StackLayout.LayoutMethod=\"HorizontalLeftToRight\" ><Children><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\" SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@JustificationHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@JustificationText\" /></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\"   SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"24\" Text=\"@WarScoreHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"36\" Text=\"@WarScoreText\" /></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\"   SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@WarFatigueHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@WarFatigueText\" /></Children></ListPanel></Children></ListPanel>\");
            firstRow.LoadXml("<ListPanel IsVisible=\"@WarExists\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" MarginTop=\"20\" MarginBottom=\"20\" MarginRight=\"75\" MarginLeft=\"50\" StackLayout.LayoutMethod=\"HorizontalLeftToRight\"><Children><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\" SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@JustificationHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@JustificationText\"><Children><HintWidget DataSource=\"{JustificationHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\"   SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"24\" Text=\"@WarScoreHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"36\" Text=\"@WarScoreText\"><Children><HintWidget DataSource=\"{WarScoreHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\" SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@WarObjectiveHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@WarObjectiveText\"><Children><HintWidget DataSource=\"{WarObjectiveHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel></Children></ListPanel>");
            secondRow.LoadXml("<ListPanel IsVisible=\"@WarExists\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" MarginTop=\"20\" MarginBottom=\"20\" MarginRight=\"75\" MarginLeft=\"50\" StackLayout.LayoutMethod=\"HorizontalLeftToRight\"><Children><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\" SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@PlayerFrontHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@PlayerFrontText\"><Children><HintWidget DataSource=\"{FrontHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\"   SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@PlayerFatigueHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@PlayerFatigueText\"><Children><HintWidget DataSource=\"{PlayerFatigueHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\"   SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@EnemyFatigueHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@EnemyFatigueText\"><Children><HintWidget DataSource=\"{EnemyFatigueHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel><ListPanel HorizontalAlignment=\"Center\" HeightSizePolicy=\"CoverChildren\" WidthSizePolicy=\"StretchToParent\" SuggestedWidth=\"100\" StackLayout.LayoutMethod=\"VerticalBottomToTop\"><Children><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Clan.Leader.Text\" Brush.FontSize=\"20\" Text=\"@EnemyFrontHeader\" MarginBottom=\"15\" /><RichTextWidget WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" HorizontalAlignment=\"Center\" Brush=\"Kingdom.Wars.Stat.Name.Text\" Brush.FontSize=\"30\" Text=\"@EnemyFrontText\"><Children><HintWidget DataSource=\"{FrontHint}\" WidthSizePolicy=\"StretchToParent\" HeightSizePolicy=\"CoverChildren\" Command.HoverBegin=\"ExecuteBeginHint\" Command.HoverEnd=\"ExecuteEndHint\" /></Children></RichTextWidget></Children></ListPanel></Children></ListPanel>");
            
            nodes = new List<XmlNode> { firstRow, secondRow};
        }

        public override InsertType Type => InsertType.Child;
        public override int Index => 2;

        [PrefabExtensionXmlNodes] public IEnumerable<XmlNode> Nodes => nodes;
    }
}